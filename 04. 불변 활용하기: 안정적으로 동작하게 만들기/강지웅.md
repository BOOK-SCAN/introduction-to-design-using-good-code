# 📌 Contents

### 📌 재할당
- 재할당으로 변수의 의미가 바뀌면 읽는 사람은 헷갈릴 수밖에 없고, 이는 버그를 만들어 낼 수 있다.
- 재할당을 막는 방법
  + 불변 변수로 만들기: final 수식자 사용
  + 매개변수도 불변으로 만들기

### 📌 가변으로 인해 발생하는 의도하지 않은 영향
- 사례1: 가변 인스턴스 재사용
  + 인스턴스 재사용으로 인해 한쪽의 변경이 다른 한쪽에도 영향을 준 사례
  + 인스턴스를 개별적으로 생성하여 사용하기
- 사례2: 함수로 가변 인스턴스 조작
  + 메서드를 다른 스레드에서 호출하면서 인스턴스가 사용되어 부수 효과가 발생
- 부수 효과: '함수가 매개변수를 전달받고, 값을 리턴하는 것'(주요 작용) 이외에 외부 상태(인스턴스 변수 등)를 변경하는 것
- 작업 실행 순서에 의존하는 코드는 결과를 예측하기 힘들며, 유지 보수하기 힘들다.
- 함수 외부에 영향을 주지 않는 **'함수 내부에 선언한 지역 변수의 변경'은 부수 효과라고 말할 수 없다.**
- 부수 효과가 있는 함수를 개선시키는 방법: 함수의 영향 범위 한정하기
  + 데이터(변수)는 매개변수로 받을 것
  + 상태를 변경하지 않을 것
  + 값은 함수의 리턴 값으로 돌려줄 것
  + 객체 지향 프로그래밍 언어는 함수의 부수 효과로 인한 범위를 클래스 내부까지 허용하는 것이 일반적이다.

### 📌불변과 가변은 어떻게 다루어야 할까
- 불변 변수의 장점: 혼란을 줄일 수 있다. 결과를 예측하기 쉽다. 유지 보수가 편리해진다.
- 가변으로 설계해야 할 때
  + 성능이 중요한 경우: 대량의 데이터를 빠르게 처리해야 하는 경우, 이미지를 처리하는 경우, 리소스에 제약이 큰 임베디드 소프트웨어를 다루는 경우 등
  + 범위가 국소적인 경우: 반복문 카운터 등 반복 처리 스코프에서만 사용되는 지역 변수 등
- 인스턴스 변수를 가변으로 만든 경우, 메서드를 만들 때 주의해야 할 점
  + 뮤테이터(상태를 변화시키는 메서드)를 올바른 상태로 변경할 수 있도록 제대로 된 조건 사용하기
  + 코드 외부와 데이터 교환은 국소화하기: 리포지터리 패턴(데이터베이스의 영속화를 캡슐화하는 디자인 패턴)

# ❓ Questions

### ❓ 리포지토리 패턴 
- 데이터가 있는 여러 저장소(Local, Remote)를 추상화하여 중앙 집중처리 방식을 구성하고, 데이터를 사용하는 로직을 분리시키기 위한 디자인 패턴
![image](https://github.com/BOOK-SCAN/introduction-to-design-using-good-code/assets/107825793/e6d2bbb9-c6c0-4211-80e8-10909e635a64)

- Repository가 추상화되어 있기 때문에 ViewModel은 언제나 같은 인터페이스로 데이터를 요청할 수 있으며, 실제로 어떤 데이터를 사용하는지 전혀 알 필요가 없기 때문에 앱 환경에 맞는 적절한 데이터를 사용하기에 편리하다.
- 새로운 데이터 로직 코드를 쉽게 추가할 수 있다.

- 참고: https://0391kjy.tistory.com/39
