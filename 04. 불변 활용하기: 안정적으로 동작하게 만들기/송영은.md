# 📌 Contents


## 📌 재할당

- 재할당(파괴적 할당)이란? 변수에 값을 다시 할당하는 것
- 재할당은 변수의 의미를 바꿔 추측하기 어렵게 만듦

### 불변 변수로 만들어서 재할당 막기

- final 수식자 붙이기
- 개별적인 불변 지역 변수를 사용하는 형태로 변경하기

### 매개변수도 불변으로 만들기

- 매개변수도 변경하면 값의 의미가 바뀔 수 있으니, 막으려면 final을 붙이면 됨
- 매개변수에 어떠한 연산을 적용하고 싶다면, 불변 지역 변수를 만들고 이를 활용해서 연산

## 📌 가변으로 인해 발생하는 의도치 않은 영향

- 가변 인스턴스 재사용하기
    - 인스턴스를 재사용하면, 한쪽의 변경이 다른 한쪽에 영향을 줌
- 함수로 가변 인스턴스 조작하기
    
    → 부수효과를 만들어낼 수 있음
    
- 부수효과의 단점
    - 부수효과?
        - 함수가 매개변수를 전달받고, 값을 리턴하는 것 이외에 외부상태(인스턴스 변수 등)를 변경하는 것
    - 함수에는 주요 작용과 부수 효과가 있음
        - 주요 작용 : 함수가 매개변수를 전달 받고, 값을 리턴하는 것
        - 부수 효과 : 주요 작용 이외의 상태 변경(함수 밖에 있는 상태를 변경하는 것)을 일으키는 것
        - 상태변경
            - 인스턴스 변수 변경
            - 전역 변수 변경
            - 매개변수 변경
            - 파일 읽고 쓰기와 같은 I/O 조작
- 함수의 영향 범위 한정하기
    - 예상치 못한 동작을 막으려면, 함수가 영향을 주거나 받을 수 있는 범위를 한정하는 것이 좋음
        - 데이터(상태)는 매개변수로 받음
        - 상태를 변경하지 않음
        - 값은 함수의 리턴 값으로 돌려줌
- 불변으로 만들어서 예기치 못한 동작 막기
    - 기능 변경 때에 의도하지 않게 부수 효과가  있는 함수가 만들어져서, 예상치 못한 동작을 일으킬 가능성은 항상 존재함.

## 📌 불변과 가변은 어떻게 다루어야 할까

- 기본적으로 불변으로
    - 변수의 의미가 변하지 않으므로, 혼란을 줄일 수 있음
    - 동작이 안정적이게 되므로, 결과를 예측하기 쉬움
    - 코드의 영향 범위가 한정적이므로, 유지 보수가 편리해짐
- 가변으로 설계해야 하는 경우
    - 성능이 중요한 경우, 가변이 필요할 경우도 있음
    - 크기가 큰 인스턴스를 새로 생성하면서 시간이 오래 걸려 성능에 문제가 생긴다면, 불변보다는 가변을 사용하는 것이 좋음
- 상태를 변경하는 메서드 설계하기
- 코드 외부와 데이터 교환은 국소화하기
    - 리포지터리 패턴은 데이터베이스의 영속화를 캡슐화하는 디자인 패턴임.
        - 데이터베이스의 영속화?
            - 데이터베이스에 데이터를 저장하는 것

# ❓ Questions


### ❓ 리포지터리 패턴?

- 데이터 레이어를 앱의 나머지 부분에서 분리하는 디자인 패턴

[[Design Pattern] Repository패턴이란](https://eunjin3786.tistory.com/198)


<aside>
💡 안드로이드 공식문서의 위 그림을 보면, 데이터가 있는 여러 저장소(Local, Remote)를 필요한 공통 특성들을 추상화하여 중앙 집중처리 방식을 구성한다. 즉, Data의 출처에 관계 없이 동일한 인터페이스로 데이터에 접근할 수 있도록 하는 패턴이다. 그래서 Repositories는 데이터 소스(ex: 로컬 데이터, 웹 서비스 API로 부터 데이터, 캐시 데이터) 간의 충돌을 해결하고 이 데이터의 변경사항을 중앙 집중화할 수 있다. 그리고 DataSource들 Local 이면 (Room, SQlite), Remote면 서버와 api 통신하는 특정한 목적들을 알 수 없이 우리는 필요한 데이터만 요청하게 되므로, 캡슐화 되게 된다.

</aside>
