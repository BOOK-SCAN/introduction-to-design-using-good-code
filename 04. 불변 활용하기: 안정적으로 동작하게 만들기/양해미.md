# 4. 불변 활용하기: 안정적으로 동작하게 만들기

## **📌 불변 활용하기**

**재할당 :** 변수에 값을 다시 할당하는 것

**불변 변수로 만들어서 재할당을 막는다.**

```java
int damage() {
	final int basicAttackPower = member.power() + member.weaponAttack();
	final int finalAttackPower = (int)(basicAttackPower * (1f + member.spped() / 100f));
	final int reduction = (int)(enemy.defence/2);
	final int damage = Math.max(0, finalAttackPower - reduction);
	
	return damage;
}
```

**가변으로 인해 발생하는 의도하지 않은 영향**

인스턴스를 재사용하면, 다른 쪽에 영향을 준다.

이를 예방하려면 인스턴스를 개별적으로 생성하고, 재사용하지 않는 로직으로 변경한다.

**불변과 가변은 어떻게 다루어야할까?**

- 기본적으로 불변으로!
    - 변수의 의미가 변하지 않으므로, 혼란을 줄일 수 있음
    - 동작이 안정적이게 되므로, 결과를 예측하기 쉬움.
    - 코드의 영향 벙위가 한정적이므로, 유지보수가 편리해짐.
- 가변으로 설계해야 하는 경우
    - 성능이 중요한 경우는 가변이 필요하다. (대량의 데이터를 빠르게 처리해야하는 경우,  이미지를 처리하는 경우, 리소스에 제약이 큰 임베디드 소프트웨어를 다루는 경우)
    

# ❓Question

## ❓리포지터리 패턴이란?

<aside>
👉🏻 데이터 레이어를 앱의 나머지 부분에서 분리하는 디자인패턴이다.
데이터레이어는 UI와는 별도로 앱의 데이터와 비즈니스 로직을 처리하는 앱 레이어 부분이며, 다른 레이어에서 데이터 레이어에서 제공하는 API를 통해서 이 데이터에 액세스 할 수 있다.

</aside>

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/c90e26ec-23b0-4380-8daf-9f11e4550e28/23f66aa9-f058-4276-bf05-ed51e2b47d8b/Untitled.png)

- UI layer 밑에 Repository라는 layer를 하나 더 두어서 viewModel은 오직 비즈니스로직만 집중하게 한다.
- viewModel은 내가 원하는 데이터가 로컬 건지 서버 건지 알 필요없이 그냥 repository에게 요청하면 된다.
