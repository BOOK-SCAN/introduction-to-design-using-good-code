# 📌 06. 조건 분기: 미궁처럼 복잡한 분기 처리를 무너뜨리는 방법

### 📌 조건 분기가 중첩되어 낮아지는 가독성

- if문이 중첩되어 사용되면 코드의 가독성이 떨어진다.
- 이러한 중첩을 해결하는 방법으로는 조리 리턴이 있다.
- 조기 리턴은 조건을 만족하지 않으면 바로 리턴하는 방법이다. 조기 리턴을 사용하면 조건 로직과 실행 로직이 분리되어 조건,실행 로직 수정이 간단해진다.

### 📌 switch 조건문 중복

- 만약 어떤 게임을 만드는데, 이름, MP소비량, 공격력과 같은 마법들의 기본 요구사항과 파이어, 라이트닝 등 마법들이 있다고 가정하자
1. switch 조건문을 사용해서 코드 작성하기
    
    우선 MagicType에서 마법의 종류에 따라 switch문으로 나눈다
    
2. 같은 형태의 switch 조건문이 여러개 사용되기 시작
    
    MP소비량을 알려주는 costMP와, 공격력을 알려주는 AttackPower에서도 switch를 통해 나눈다
    
3. 요구 사항 변경 시 수정 누락(case 구문 추가 누락)
    
    새로운 마법이 추가될때, AttackPower에서 case를 추가하는 것을 까먹었다
    
4. 폭발적으로 늘어나는 switch 조건문 중복
    
    이렇듯 메서드가 늘어날수록 switch-case 구문이 폭발적으로 늘어날 것이다. 
    

- 이러한 문제들을 해결하기 위해서 다음과 같은 방법들이 있다.

- 조건 분기 모으기:
    - 단일 책임의 원리 ( 소프트웨어 시스템이 선택지를 제공해야 한다면, 그 시스템 내부의 어떤 한 모듈만으로 모든 선택지를 파악 할 수 있어야 한다. )
    - 이 원리에 따라 같은 분기를 하는 조건들을 모아 한번에 작성해야 한다.
    - 위 상황에서는 Magic이라는 하나의 클래스에서 마법의 종류별로 나누어 모든 것을 선택해야 한다.

- 인터페이스로 switch 조건문 중복 해소하기:
    - 그러나 위와 같이 하게 된다면 클래스가 너무 거대해질 수 있다.
    - 그럴땐 인터페이스를 사용해서 해결해 줄 수 있다.
    - 인터페이스를 사용하면 서로 다른 자료형을 같은 자료형처럼 사용할 수 있게 해준다.
    - 인터페이스를 만들어서 공통의 메서드를 정의하고, 각각의 다른 자료형을 가진 클래스가 ㅇ니터페이스를 받아 구현하는 방식이다.

- 인터페이스를 switch 조건문 중복에 응용하기 (전략패턴)
    - 종류별로 다르게 처리해야하는 기능을 인터페이스의 메서드로 정의하기
    - 종류별로 클래스로 만들기
    - 각각의 클래스에 인터페이스 구현하기
    - switch 조건문 대신 Map으로 변경하기
    - 메서드를 구현하지 않으면 오류로 인식하게 만들기
    - 값 객체화하기

### 📌 조건 분기 중복과 중첩

- 인터페이스는 switch 조건문의 중복을 제거할 수 있고, 다중중첩된 복잡한 분기를 제거하는 데 활용 할 수 있다.
- 정책패턴은 조건을 부품처럼 만들어 부품으로 만든 조건을 조합해 사용하는 패턴

### 📌 자료형 확인에 조건 분기 사용하지 않기

- 리스코프 치환 원칙이란 부모 객체와 자식 객체가 있을 때 부모 객체를 호출하는 동작에서 자식 객체가 부모 객체를 완전히 대체할 수 있다는 원칙이다.
- 하나의 인터페이스를 상속해 생긴 두개의 자료형이 있을 때, 새로운 로직을 바깥에서 추가하려 하는 것 보단 인터페이스에서 추가해 만드는 것이 좋다

# ❓ Question

---

### ❓리스코프 치환의 법칙을 어기는 것이 무엇인가?

- 책에서 리스코프 치환의 법칙이란, ‘기반 자료형을 하위 자료형으로 변경해도 코드가 문제없이 작동하는 것’ 이라고 되어있는데, 예시코드 6.54는 정상적으로 작동하는 코드 아닌가? 어떤 점에서 리스코프 법칙을 어긴 것인가?
