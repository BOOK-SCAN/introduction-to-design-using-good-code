# 📌 14. 리팩터링 : 기존의 코드를 성장시키는 기술

### 📌  리팩터링의 흐름

- 리팩터링 : 실질적인 동작은 유지하면서 구조만 정리하는 작업
- 중첩을 제거해 가독성을 높이기 : if 조건을 반전시켜 중첩 제거
- 의미단위로 로직 정리하기 : 행동의 의미로 나누어 정리
- 조건을 읽기 쉽게 하기
- 목적을 나타내는 메서드로 만들기

### 📌  단위 테스트로 리팩터링 중 실수 방지하기

- 단위 테스트 : 작은 기능 단위로 동작을 검증하는 테스트
- 테스트 코드와 리팩터링 과정
    - 코드 과제 정리
    - 테스트 코드를 사용한 리팩터링 흐름
        - 이상적 구조 클래스 기본 형태 잡기
        - 기본 형태 기반으로 테스트 코드 작성
        - 테스트 실패시키기
        - 테스트 성공시키기 위한 최소한 코드 작성
        - 기본 형태 클래스 내부에서 리팩토링 대상 코드 호출
        - 테스트 성공할 수 있도록 로직을 이상적 구조로 리팩토링

### 📌  불확실한 사양을 이해하기 위한 분석 방법

- 사양을 몰라 테스트 코드를 작성할 수 없을때, 테스트 코드를 추가하는 방법
- 문서화 테스트
    - 분석하고 싶은 메서드의 테스트를 작성해, 어떤 동작을 하는지 알아내는 기법
    - 완벽한 분석은 어렵지만 사양의 단서를 찾는 방법중 하나
- 스크래치 리팩터링
    - 복잡한 구조로 이상적인 구조를 유추하기 어려운 경우, 분석을 하는 방법
    - 해당 코드를 체크아웃한 후, 테스트 코드 없이 리팩토링을 진행해 이해하기 쉽도록 바꾼다.
    - 그렇게 이상적인 구조를 파악할 수 있다.

### 📌  IDE의 리팩터링 기능

- 리네임 : 한 번에 클래스, 메서드, 변수의 이름을 전부 변경하는 리팩터링 기능
- 메서드 추출 : 로직의 일부를 메서드로 추출하는 기능

### 📌  리팩터링 주의사항

- 기능 추가와 리팩터링은 동시에 하면 안된다
- 작은 단위로 실시해야함
- 불필요한 사항은 제거

